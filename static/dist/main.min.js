!function(){function e(){A=$("#chan").html(),m=window.mobilecheck();var e=window.mobilecheck()?"left":"right";window.onpopstate=function(e){n()},o(),"zoff.no"==window.location.hostname?add="https://zoff.no":add=window.location.hostname,void 0!=ge&&(ge.stopInterval=!1),$("ul.playlist-tabs").tabs(),$("ul.playlist-tabs-loggedIn").tabs(),$(".chatTabs").tabs(),$("#settings").sideNav({menuWidth:300,edge:e,closeOnClick:!1}),$(".collapsible").collapsible({accordion:!0}),u=$("#temp-results-container"),p=$("#empty-results-container").html(),$(".video-container").resizable({start:function(e,t){$("iframe").css("pointer-events","none")},stop:function(e,t){$("iframe").css("pointer-events","auto"),c.set_width($(this).width())},handles:"e",minWidth:350}),L=io.connect(""+add+":8880",ce),ge.setup_youtube_listener(A),s.admin_listener(),P.channel_listener(),L.on("get_list",function(){L.emit("list",A.toLowerCase())}),L.on("suggested",function(e){var t=!0;void 0==e.id&&(t=!1),ye.catchUserSuggests(e,t)}),L.on("viewers",function(e){I=e,void 0!==B&&ge.getTitle(B,I)}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?(document.getElementById("search").blur(),$("#channel-load").css("display","none")):(window.onYouTubeIframeAPIReady=ge.onYouTubeIframeAPIReady,ge.loadPlayer()),window.mobilecheck()&&pe.initiate_volume(),l.setup_chat_listener(A),l.allchat_listener(),window.mobilecheck()||z.host_listener(),d.msieversion()||Notification.requestPermission(),$(".search_input").focus(),ue=$.ajax({type:"GET",url:"https://api.github.com/repos/zoff-music/zoff/commits",async:!1}).responseText,ue=$.parseJSON(ue),$("#latest-commit").html("Latest Commit: <br>"+ue[0].commit.author.date.substring(0,10)+": "+ue[0].committer.login+"<br><a href='"+ue[0].html_url+"'>"+ue[0].sha.substring(0,10)+"</a>: "+ue[0].commit.message+"<br"),d.sample(),$("#results").hover(function(){$("div.result").removeClass("hoverResults"),te=0},function(){}),$("#search").focus(),$("#embed-button").css("display","inline-block"),$("#embed-area").val('<embed src="https://zoff.no/embed.html#'+A.toLowerCase()+'&autplay" width="600px" height="300px">'),$("#search").attr("placeholder","Find song on YouTube...")}function t(e){search_input=$(".search_input").val(),code=e.keyCode||e.which,40!=code&&38!=code&&13!=code&&39!=code&&37!=code&&17!=code&&16!=code&&225!=code&&18!=code&&(clearTimeout(h),search_input.length<3&&$("#results").html(""),13==code?fe.search(search_input):h=setTimeout(function(){fe.search(search_input)},1e3))}function o(){$("#facebook-code-link").attr("href","https://www.facebook.com/sharer/sharer.php?u=https://zoff.no/"+A.toLowerCase()),$("#facebook-code-link").attr("onclick","window.open('https://www.facebook.com/sharer/sharer.php?u=https://zoff.no/"+A.toLowerCase()+"', 'Share Playlist','width=600,height=300'); return false;"),$("#twitter-code-link").attr("href","http://twitter.com/intent/tweet?url=https://zoff.no/"+A.toLowerCase()+"&amp;text=Check%20out%20this%20playlist%20"+A.toLowerCase()+"%20on%20Zöff!&amp;via=zoffmusic"),$("#twitter-code-link").attr("onclick","window.open('http://twitter.com/intent/tweet?url=https://zoff.no/"+A.toLowerCase()+"/&amp;text=Check%20out%20this%20playlist%20"+A.toLowerCase()+"%20on%20Zöff!&amp;via=zoffmusic','Share Playlist','width=600,height=300'); return false;"),$("#qr-code-link").attr("href","//chart.googleapis.com/chart?chs=500x500&cht=qr&chl=https://zoff.no/"+A.toLowerCase()+"&choe=UTF-8&chld=L%7C1"),$("#qr-code-image-link").attr("src","//chart.googleapis.com/chart?chs=150x150&cht=qr&chl=https://zoff.no/"+A.toLowerCase()+"&choe=UTF-8&chld=L%7C1")}function n(){var e=window.location.href.split("/");"#!"==e[3].substr(0,1)||""==e[3]||5==e.length&&"#"==e[4].substr(0,1)?""==e[3]&&($("#channel-load").css("display","block"),window.scrollTo(0,0),ge.stopInterval=!0,s.display_logged_out(),s.beginning=!0,A="",ee=!1,ie=!1,$("#embed-button").css("display","none"),L.removeAllListeners(),$.ajax({url:"php/nochan.php",success:function(e){L.disconnect(),document.getElementById("volume-button").removeEventListener("click",he.mute_video),document.getElementById("playpause").removeEventListener("click",he.play_pause),document.getElementById("fullscreen").removeEventListener("click",he.fullscreen),S="",B="",$("meta[name=theme-color]").attr("content","#2D2D2D"),/iPad|iPhone|iPod/.test(navigator.userAgent)||ge.ytplayer.destroy(),$(".drag-target").remove(),$("#sidenav-overlay").remove(),$("main").attr("class","center-align container"),$("body").attr("id",""),$("body").attr("style",""),$("header").html($($(e)[59]).html()),$($(e)[61]).insertAfter("header"),$($(e)[63]).insertAfter(".mega"),$("main").html($($(e)[67]).html()),$(".page-footer").removeClass("padding-bottom-extra"),$(".page-footer").removeClass("padding-bottom-novideo"),$("#favicon").attr("href","static/images/favicon.png"),1==$("#alreadyfp").length?window.initfp():(window.fromChannel=!0,window.initfp()),0==$("#alreadychannel").length&&$("head").append("<div id='alreadychannel'></div"),$("#channel-load").css("display","none"),document.title="Zöff",window.initfp()}})):(L.emit("change_channel"),s.beginning=!0,A=e[3].replace("#",""),$("#chan").html(d.upperFirst(A)),N=!0,L.emit("list",A.toLowerCase()))}function a(){$("#facebook-code-link").attr("href","https://www.facebook.com/sharer/sharer.php?u=https://zoff.no/"),$("#facebook-code-link").attr("onclick","window.open('https://www.facebook.com/sharer/sharer.php?u=https://zoff.no/', 'Share Zöff','width=600,height=300'); return false;"),$("#twitter-code-link").attr("href","http://twitter.com/intent/tweet?url=https://zoff.no/&amp;text=Check%20out%20Zöff!&amp;via=zoffmusic"),$("#twitter-code-link").attr("onclick","window.open('http://twitter.com/intent/tweet?url=https://zoff.no/&amp;text=Check%20out%20Zöff!&amp;via=zoffmusic','Share Playlist','width=600,height=300'); return false;"),$("#qr-code-link").attr("href","//chart.googleapis.com/chart?chs=500x500&cht=qr&chl=https://zoff.no/&choe=UTF-8&chld=L%7C1"),$("#qr-code-image-link").attr("src","//chart.googleapis.com/chart?chs=150x150&cht=qr&chl=https://zoff.no/&choe=UTF-8&chld=L%7C1")}function i(){var e=new Date;3==e.getMonth()&&1==e.getDate()&&($(".mega").css("-webkit-transform","rotate(180deg)"),$(".mega").css("-moz-transform","rotate(180deg)")),window.onpopstate=function(e){var t=window.location.href.split("/");""!=t[3]&&"#"!=t[3].substring(0,1)&&me.to_channel(t[3],!0)},de=$("#channel-list-container").html(),a();var t={secure:!0,"force new connection":!0};"zoff.no"==window.location.hostname?add="https://zoff.no":add=window.location.hostname,L=io.connect(""+add+":8880",t),L.on("playlists",function(e){$("#channels").empty(),me.populate_channels(e.channels),me.set_viewers(e.viewers)}),L.emit("frontpage_lists"),$("#channel-load").css("display","none"),"#donation"==window.location.hash&&(window.location.hash="#",$("#donation").openModal()),localStorage.ok_cookie||Materialize.toast("We're using cookies to enhance your experience!  <a class='waves-effect waves-light btn light-green' href='#ok' id='cookieok' style='cursor:pointer;pointer-events:all;'> ok</a>",1e4);var o=0;document.getElementById("zicon").addEventListener("click",function(){o+=10,document.getElementById("zicon").style.paddingLeft=o+"%",o>=100&&(window.location.href="http://etys.no")}),!window.mobilecheck()&&me.winter&&me.start_snowfall(),ue=$.ajax({type:"GET",url:"https://api.github.com/repos/zoff-music/zoff/commits",async:!1}).responseText,ue=$.parseJSON(ue),$("#latest-commit").html("Latest Commit: <br>"+ue[0].commit.author.date.substring(0,10)+": "+ue[0].committer.login+"<br><a href='"+ue[0].html_url+"'>"+ue[0].sha.substring(0,10)+"</a>: "+ue[0].commit.message+"<br")}var s={beginning:!0,admin_listener:function(){L.on("toast",function(e){switch(e){case"addedsong":e=d.rnd(["I added your song","Your song has been added","Yay, more songs!","Thats a cool song!","I added that song for you","I see you like adding songs..."]);break;case"savedsettings":e=d.rnd(["I've saved your settings","I stored all your settings","Your settings have been stored in a safe place"]);break;case"wrongpass":e=d.rnd(["That's not the right password!","Wrong! Better luck next time...","You seem to have mistyped the password","Incorrect. Have you tried meditating?","Nope, wrong password!","Wrong password. The authorities have been notified."]),c.remove_pass(A.toLowerCase()),s.display_logged_out(),N=!0;break;case"shuffled":e=d.rnd(["♫ You stir me right round, baby. ♫","♫ Stir, stir, stir my boat ♫","I vigorously stirred your playlist!","I hope you like your list stirred, not shaken.","I shuffled your playlist with the cosmic background radiation as a seed. Enjoy.","100% randomized, for your listening pleasure!","I hope you enjoy your fresh playlist!"]);break;case"deletesong":e=d.rnd(["Your song is now in a better place...","You won't be seeing any more of that video...","EXTERMINATE! EXTERMINATE! EXTERMINATE!","I killed it with fire","Thanks for deleting that song. I didn't like it anyways...","Removed song securely."]);break;case"voted":e=d.rnd(["You voted!","You vote like a boss","Voting is the key to democracy","May you get your song to the very top!","I love that song! I vouch for you.","Only you vote that good","I like the way you vote...","Up the video goes!","Voted Zöff for president","Only 999 more to go!"]);break;case"alreadyvoted":e=d.rnd(["You can't vote twice on that song!","I see you have voted on that song before","One vote per person!","I know you want to hear your song, but have patience!","I'm sorry, but I can't let you vote twice, Dave."]);break;case"skip":e=d.rnd(["The song was skipped","I have skipped a song","Skipped to the beat","Skipmaster3000","They see me skippin', they hatin'"]);break;case"listhaspass":e=d.rnd(["I'm sorry, but you have to be an admin to do that!","Only admins can do that","You're not allowed to do that, try logging in!","I can't let you do that","Please log in to do that"]);break;case"noskip":e=d.rnd(["Only Admins can skip songs, peasant!","You have to log in to skip songs on this channel","Try clicking the settings icon and logging in before you skip"]);break;case"alreadyskip":e=d.rnd(["Skipping is democratic, only one vote per person!","More people have to vote to skip, not just you!","Get someone else to skip too! You can't do it on yourself."]);break;case"notyetskip":e="Skipping is disabled the first 10 seconds.";break;case"correctpass":e="Correct password. You now have access to the sacred realm of The Admin.";break;case"changedpass":e="Your password has been changed!";break;case"suggested":e="Your song was suggested!";break;case"alreadyplay":e="Seems the song you want is already playing. No fooling the system!"}Materialize.toast(e,4e3)}),L.on("pw",function(e){N=!1,J=e,names=["vote","addsongs","longsongs","frontpage","allvideos","removeplay","skip","shuffle"],c.set_pass(A.toLowerCase(),c.decrypt_pass(e));for(var t=0;t<names.length;t++)$("input[name="+names[t]+"]").attr("disabled",!1);$(".card-action").removeClass("hide"),$("#admin-lock").removeClass("mdi-action-lock"),$("#password").val(""),$("#password").attr("placeholder","Change channel password"),d.contains($(".playlist-tabs").attr("class").split(" "),"hide")||($(".playlist-tabs-loggedIn").removeClass("hide"),$(".playlist-tabs").addClass("hide")),d.contains($("#admin-lock").attr("class").split(" "),"mdi-action-lock-open")||$("#admin-lock").addClass("mdi-action-lock-open clickable"),$("ul.playlist-tabs-loggedIn").tabs("select_tab",$(".playlist-tabs li a.active").attr("href").substring(1))}),L.on("conf",function(e){c.init(),s.set_conf(e[0]),void 0!==c.get_pass(A.toLowerCase())&&s.beginning&&""!=c.get_pass(A.toLowerCase())&&(L.emit("password",[c.crypt_pass(c.get_pass(A.toLowerCase())),A.toLowerCase()]),s.beginning=!1)})},pass_save:function(){N?L.emit("password",[c.crypt_pass(CryptoJS.SHA256(document.getElementById("password").value).toString()),A.toLowerCase()]):L.emit("password",[c.crypt_pass(CryptoJS.SHA256(document.getElementById("password").value).toString()),A.toLowerCase(),c.crypt_pass(c.get_pass(A.toLowerCase()))])},log_out:function(){c.get_pass(A.toLowerCase())?(c.remove_pass(A.toLowerCase()),s.display_logged_out(),Materialize.toast("Logged out",4e3)):Materialize.toast("Not logged in",4e3)},display_logged_out:function(){for(N=!0,J="",names=["vote","addsongs","longsongs","frontpage","allvideos","removeplay","skip","shuffle"],document.getElementById("password").value="",te=0;te<names.length;te++)$("input[name="+names[te]+"]").attr("disabled",!0);d.contains($("#admin-lock").attr("class").split(" "),"mdi-action-lock")||$("#admin-lock").addClass("mdi-action-lock"),d.contains($(".playlist-tabs-loggedIn").attr("class").split(" "),"hide")||($(".playlist-tabs-loggedIn").addClass("hide"),$(".playlist-tabs").removeClass("hide")),0==$(".card-action").length||d.contains($(".card-action").attr("class").split(" "),"hide")||$(".card-action").addClass("hide"),"#suggestions"==$(".playlist-tabs-li a.active").attr("href")?($("ul.playlist-tabs").tabs("select_tab","wrapper"),$("ul.playlist-tabs-loggedIn").tabs("select_tab","wrapper"),$("#wrapper").removeClass("tabs_height")):$("ul.playlist-tabs").tabs("select_tab",$(".playlist-tabs-loggedIn li a.active").attr("href").substring(1)),$("#admin-lock").removeClass("mdi-action-lock-open clickable"),$("#password").attr("placeholder","Enter channel password")},save:function(){s.submitAdmin(document.getElementById("adminForm").elements)},set_conf:function(e){F=e.allvideos,longsongs=e.longsongs,names=["vote","addsongs","longsongs","frontpage","allvideos","removeplay","skip","shuffle"],""!=e.adminpass&&N?j=!0:(j=!1,!window.mobilecheck());for(var t=0;t<names.length;t++)document.getElementsByName(names[t])[0].checked=e[names[t]]===!0,$("input[name="+names[t]+"]").attr("disabled",j);j?s.display_logged_out():j||void 0!==c.get_pass(A.toLowerCase())||(d.contains($(".playlist-tabs").attr("class").split(" "),"hide")||($(".playlist-tabs-loggedIn").removeClass("hide"),$(".playlist-tabs").addClass("hide")),$("#password").attr("placeholder","Create channel password"))},submitAdmin:function(e){voting=e.vote.checked,addsongs=e.addsongs.checked,longsongs=e.longsongs.checked,U=e.frontpage.checked,allvideos=e.allvideos.checked,removeplay=e.removeplay.checked,skipping=e.skip.checked,shuffling=e.shuffle.checked,configs=[voting,addsongs,longsongs,U,allvideos,removeplay,J,skipping,shuffling],L.emit("conf",configs)},hide_settings:function(){$("#settings").sideNav("hide")},shuffle:function(){L.emit("shuffle",void 0!==J?J:"")},get_admin:function(){return[N,j]}},l={namechange:function(e){L.emit("namechange",e),c.set_name(e)},removename:function(){L.emit("removename"),c.remove_name()},chat:function(e){e.value.length>150||(e.value.startsWith("/name ")?l.namechange(e.value.substring(6)):e.value.startsWith("/removename")?l.removename():"#all_chat"==$(".chat-tab-li a.active").attr("href")?L.emit("all,chat",e.value):L.emit("chat",e.value),e.value="")},allchat_listener:function(){L.on("chat.all",function(e){q||":"!=e[1].substring(0,1)||se||($("#favicon").attr("href","static/images/highlogo.png"),q=!0,O=!0,re=!0,le||l.chat_blink()),document.hidden&&$("#favicon").attr("href","static/images/highlogo.png");var t=d.intToARGB(d.hashCode(e[0]));if(t.length<6)for(x=t.length;x<6;x++)t="0"+t;t=d.hexToRgb(t.substring(0,6));var o=d.rgbToHsl([t.r,t.g,t.b],!1);$("#chatall").append("<li title='"+e[2]+"''><span style='color:"+o+";'>"+e[0]+"</span></li>");var n=document.createTextNode(e[1]);$("#chatall li:last")[0].appendChild(n),document.getElementById("chatall").scrollTop=document.getElementById("chatall").scrollHeight})},setup_chat_listener:function(e){L.on("chat",function(e){q||":"!=e[1].substring(0,1)||se||($("#favicon").attr("href","static/images/highlogo.png"),O=!0,re=!0,le||l.chat_blink());var t=d.intToARGB(d.hashCode(e[0]));if(t.length<6)for(x=t.length;x<6;x++)t="0"+t;t=d.hexToRgb(t.substring(0,6));var o=d.rgbToHsl([t.r,t.g,t.b],!1);$("#chatchannel").append("<li><span style='color:"+o+";'>"+e[0]+"</span></li>");var n=document.createTextNode(e[1]);$("#chatchannel li:last")[0].appendChild(n),document.getElementById("chatchannel").scrollTop=document.getElementById("chatchannel").scrollHeight})},chat_blink:function(){le=!0,$(".chat-link").attr("style","color: grey !important;"),setTimeout(function(){$(".chat-link").attr("style","color: white !important;"),setTimeout(function(){le&&l.chat_blink()},1e3)},1e3)}},c={conf_pass:void 0,init:function(){document.cookie=A.toLowerCase()+"=; path=/"+A.toLowerCase()+"; expires="+new Date(0).toUTCString();try{conf_arr=c.decrypt(c.getCookie("_opt"),"_opt")}catch(e){conf_arr=c.decrypt(c.create_cookie("_opt"),"_opt")}try{c.conf_pass=c.decrypt(c.getCookie(A.toLowerCase()),A.toLowerCase())}catch(e){c.conf_pass=c.decrypt(c.create_cookie(A.toLowerCase()),A.toLowerCase())}z.change_enabled(conf_arr.remote),100!=conf_arr.width&&ge.set_width(conf_arr.width),void 0!=conf_arr.name&&""!=conf_arr.name&&l.namechange(conf_arr.name)},decrypt:function(e,t){void 0===c.getCookie(t)&&(e=c.create_cookie(t));var o=CryptoJS.AES.decrypt(e,navigator.userAgent+navigator.languages,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return $.parseJSON(o.toString(CryptoJS.enc.Utf8))},decrypt_pass:function(e){var t=CryptoJS.AES.decrypt(e,L.id,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return t.toString(CryptoJS.enc.Utf8)},encrypt:function(e,t){var o=JSON.stringify(e),n=CryptoJS.AES.encrypt(o,navigator.userAgent+navigator.languages,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),a=new Date;a.setFullYear(a.getFullYear()+1),document.cookie=t+"="+n.toString()+";expires="+a.toGMTString()+";path=/;"},encrypt_string:function(e){var t=CryptoJS.AES.encrypt(e,L.id,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return t.toString()},get_volume:function(){return c.decrypt(c.getCookie("_opt"),"_opt").volume},set_volume:function(e){conf_arr.volume=e,c.encrypt(conf_arr,"_opt")},create_cookie:function(e){"_opt"==e?cookie_object={volume:100,width:100,remote:!0,name:""}:cookie_object={passwords:{}};var t=JSON.stringify(cookie_object),o=CryptoJS.AES.encrypt(t,navigator.userAgent+navigator.languages,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),n=new Date;return n.setFullYear(n.getFullYear()+1),document.cookie=e+"="+o.toString()+";expires="+n.toGMTString()+";path=/;",c.getCookie(e)},set_pass:function(e,t){c.conf_pass.passwords[e]=t,c.encrypt(c.conf_pass,e)},remove_pass:function(e){delete c.conf_pass.passwords[e],c.encrypt(c.conf_pass,e.toLowerCase())},set_name:function(e){conf_arr.name=e,c.encrypt(conf_arr,"_opt")},remove_name:function(){conf_arr.name="",c.encrypt(conf_arr,"_opt")},get_pass:function(e){return void 0!=c.conf_pass?c.conf_pass.passwords[e]:void 0},set_remote:function(e){conf_arr.remote=e,c.encrypt(conf_arr,"_opt")},get_remote:function(e){return conf_arr.remote},crypt_pass:function(e){var t=CryptoJS.AES.encrypt(e,L.id,{mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return t.toString()},get_width:function(){return conf_arr.width},set_width:function(e){conf_arr.width=e,c.encrypt(conf_arr,"_opt")},getCookie:function(e){var t="; "+document.cookie,o=t.split("; "+e+"=");return 2==o.length?o.pop().split(";").shift():void 0}};window.mobilecheck=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e};var d={rnd:function(e){return e[Math.floor(Math.random()*e.length)]},predicate:function(){for(var e,t,o,n=[],a=arguments.length,i=function(e,t){return e===t?0:t>e?-1:1},s=function(e,t){var o=i,n=i;return e&&(n=function(t,n){return o(e(t),e(n))}),t?function(e,t){return-1*n(e,t)}:n},r=0;a>r;r++)e=arguments[r],"string"==typeof e?(t=e,o=i):(t=e.name,o=s(e.primer,e.reverse)),n.push({name:t,cmp:o});return function(t,o){for(var i,s,r=0;a>r&&(s=0,e=n[r],i=e.name,s=e.cmp(t[i],o[i]),0===s);r++);return s}},hashCode:function(e){for(var t=0,o=0;o<e.length;o++)t=e.charCodeAt(o)+((t<<5)-t);return t},intToARGB:function(e){return(e>>24&255).toString(16)+(e>>16&255).toString(16)+(e>>8&255).toString(16)+(255&e).toString(16)},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},pad:function(e){return 10>e?"0"+Math.floor(e):Math.floor(e)},contains:function(e,t){for(var o=e.length;o--;)if(e[o]===t)return!0;return!1},sample:function(){Date.now()-X>=2*K&&(L.removeAllListeners(),L.disconnect(),L.connect(),ge.setup_all_listeners()),X=Date.now(),setTimeout(d.sample,K)},loadjsfile:function(e){if(-1==G.indexOf("["+e+"]")){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(t),G+="["+e+"]"}},msieversion:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return t>0||navigator.userAgent.match(/Trident.*rv\:11\./)?!0:!1},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e))+e},rgbToHsl:function(e,t){r=e[0],g=e[1],b=e[2],r/=255,g/=255,b/=255;var o,n,a=Math.max(r,g,b),i=Math.min(r,g,b),s=(a+i)/2;if(a==i)o=n=0;else{var l=a-i;switch(n=s>.5?l/(2-a-i):l/(a+i),a){case r:o=(g-b)/l+(g<b?6:0);break;case g:o=(b-r)/l+2;break;case b:o=(r-g)/l+4}o/=6}return s>.5&&t?s=.5:.65>s&&!t&&(s=.65),"hsl("+Math.floor(360*o)+", "+Math.floor(100*n)+"%, "+Math.floor(100*s)+"%)"},componentToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},rgbToHex:function(e,t,o){return"#"+d.componentToHex(e)+d.componentToHex(t)+d.componentToHex(o)},upperFirst:function(e){return e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase()},addClass:function(e,t){d.contains($(e).attr("class").split(" "),t)||$(e).addClass(t)},send_mail:function(e,t){if(""!=e&&""!=t){$("#submit-contact-form").addClass("hide"),$("#send-loader").removeClass("hide"),$("#contact-form-from").attr("disabled","true"),$("#contact-form-message").attr("disabled","true");var e=$("#contact-form-from").val(),t=$("#contact-form-message").val();$("#contact-container").empty(),newWindow=window.open("mailto:contact@zoff.no?Subject=Contact%20Zoff&Body="+t,"_blank"),$("#contact-container").html("Something went wrong, sorry about that. You could instead try with your own mail-client: <a title='Open in client' href='mailto:contact@zoff.no?Subject=Contact%20Zoff&Body="+t+"'>contact@zoff.no</a>"),setTimeout(function(){newWindow.close()},500)}}};$(document).on("submit","#contact-form",function(e){e.preventDefault();var t=$("#contact-form-message").val(),o=$("#contact-form-from").val();d.send_mail(o,t)}),Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=0,t=this.length;t>e;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t};var u,p,m,h,f,y,v,w,k,_,C,I,S,T,E,B,M,L,z={enabled:!0,host_listener:function(){var e;L.on("id",function(t){void 0===e?e=t:(L.removeAllListeners(t),ee=!1,e=t);var o="https://remote."+window.location.hostname+"/"+t;$("#code-text").text(t),$("#code-qr").attr("src","https://chart.googleapis.com/chart?chs=221x221&cht=qr&choe=UTF-8&chld=L|1&chl="+o),$("#code-link").attr("href",o),ee||(ee=!0,L.on(t,function(e){enabled&&("volume"==e[0]?($("#volume").slider("value",e[1]),ge.ytplayer.setVolume(e[1]),localStorage.setItem("volume",e[1]),he.choose_button(e[1],!1)):"channel"==e[0]?(console.log("changing channel"),L.emit("change_channel"),s.beginning=!0,A=e[1].toLowerCase(),$("#chan").html(d.upperFirst(A)),N=!0,L.emit("list",A.toLowerCase()),window.history.pushState("object or string","Title","/"+A.toLowerCase())):"pause"==e[0]?ge.ytplayer.pauseVideo():"play"==e[0]?ge.ytplayer.playVideo():"skip"==e[0]&&P.skip())}))}),$("input[class=remote_switch_class]").change(function(){enabled=document.getElementsByName("remote_switch")[0].checked,c.set_remote(enabled)})},change_enabled:function(e){enabled=e,document.getElementsByName("remote_switch")[0].checked=enabled}},P={empty:!1,channel_listener:function(){L.on("channel",function(e){P.channel_function(e)})},channel_function:function(e){switch(e[0]){case"list":P.populate_list(e[1]);break;case"added":P.added_song(e[1]);break;case"deleted":P.deleted_song(e[1]);break;case"vote":P.voted_song(e[1],e[2]);break;case"song_change":P.song_change(e[1])}},populate_list:function(e){void 0==D&&(D=$("#list-song-html").html()),y=e,P.sortList(),$("#wrapper").empty(),y.length>1?($.each(y,function(e,t){t.now_playing||$("#wrapper").append(P.generateSong(t,!1,oe,!0))}),oe&&(window.mobilecheck()?$(".list-image").lazyload({}):($(".list-image").lazyload({container:$("#wrapper")}).removeClass("lazy"),document.getElementById("wrapper").scrollTop+=1,document.getElementById("wrapper").scrollTop+=-1))):(P.empty=!0,$("#wrapper").append("<span id='empty-channel-message'>The playlist is empty.</span>")),$("#settings").css("visibility","visible"),$("#settings").css("opacity","1"),$("#wrapper").css("opacity","1")},added_song:function(e){y.push(e),P.sortList(),$("#suggested-"+e.id).remove(),P.empty&&($("#empty-channel-message").remove(),P.empty=!1),P.insertAtIndex(e,!0)},deleted_song:function(e){var t=P.getIndexOfSong(e),o=$("#wrapper").children()[t];try{o.style.height=0,setTimeout(function(){$("#"+e).remove(),y.splice(P.getIndexOfSong(e),1)},305),document.getElementById("wrapper").scrollTop+=1,document.getElementById("wrapper").scrollTop+=-1}catch(n){y.splice(P.getIndexOfSong(e),1),P.empty||$("#wrapper").children()[$("#wrapper").children().length-1].remove()}y.length<=2&&(P.empty=!0,$("#wrapper").append("<span id='empty-channel-message'>The playlist is empty.</span>")),$("#suggested-"+e).remove(),ye.checkUserEmpty()},voted_song:function(e,t){var o=P.getIndexOfSong(e),n=y[o];y[o].votes+=1,y[o].added=t,P.sortList(),$("#"+e).remove(),P.insertAtIndex(n,!1)},song_change:function(e){var t=y.length-1;y[0].now_playing=!0,y[0].votes=0,y[0].guids=[],y[0].added=e,y[t].now_playing=!1;try{y.push(y.shift()),P.empty||$("#wrapper").children()[0].remove(),P.insertAtIndex(y[t-1],!1),document.getElementById("wrapper").scrollTop+=1,document.getElementById("wrapper").scrollTop+=-1}catch(o){}},vote:function(e,t){return L.emit("vote",[A,e,t,J]),!0},skip:function(){return L.emit("skip",{pass:J,id:S}),!0},importOldList:function(e){var t="",o=0;playlist_url="lists/"+e+".json",T=$.parseJSON($.ajax({type:"GET",url:playlist_url,async:!1}).responseText),$.each(T.songs,function(e,n){t+=n.id+",",o>45&&(fe.addVideos(t),t="",o=0),o++}),fe.addVideos(t),document.getElementById("search").value=""},sortList:function(){y.sort(d.predicate({name:"votes",reverse:!0},"added"))},show:function(){window.mobilecheck()||(V?(V=!1,$("#toptitle").empty(),$("#chan").addClass("bigChan"),$("#chan").html("zoff.no/"+A.toLowerCase())):(V=!0,$("#toptitle").html("Zöff"),$("#chan").removeClass("bigChan"),$("#chan").html(A)))},insertAtIndex:function(e,t){te=P.getIndexOfSong(e.id),0===te?$("#wrapper").prepend(P.generateSong(e,t,!1,!0,!1)):$("#wrapper > div:nth-child("+te+")").after(P.generateSong(e,t,!1,!0,!1));var o=$("#wrapper").children()[te];t&&setTimeout(function(){$(o).css("height",66)},5)},generateSong:function(e,t,o,n,a){var i,s,r=e.id,l=e.title,c=e.votes,d="background-image:url('//img.youtube.com/vi/"+r+"/mqdefault.jpg');",u=$("<div>"+D+"</div>"),p="style";return t&&u.find("#list-song").css("height",0),N||u.find(".card-action").removeClass("hide"),1==c&&u.find(".vote-text").text("vote"),o&&(d="//img.youtube.com/vi/"+r+"/mqdefault.jpg",p="data-original"),n?(u.find(".list-votes").text(c),u.find("#list-song").attr("id",r),u.find(".vote-container").attr("title",l),i=".vote-container",s="del"):n||(u.find(".vote-text").text(e.duration),i=".add-suggested",s=a?"del_user_suggested":"del_suggested",u.find(".vote-container").attr("class","clickable add-suggested"),u.find(".add-suggested").attr("title",l),u.find("#del").attr("id",s),u.find(i).attr("data-video-title",l),u.find(i).attr("data-video-length",e.length),u.find("#list-song").attr("id","suggested-"+r),u.find(".list-image").attr("class",u.find(".list-image").attr("class").replace("list-image","list-suggested-image"))),u.find(".list-title").text(l),u.find(".list-title").attr("title",l),u.find(i).attr("data-video-id",r),u.find(".list-image").attr(p,d),u.find(".list-suggested-image").attr(p,d),u.find("#"+s).attr("data-video-id",r),u.html()},getIndexOfSong:function(e){return indexes=$.map(y,function(t,o){return t.id==e?o:void 0}),indexes[0]},scrollTop:function(){$("#wrapper").scrollTop(0)},scrollBottom:function(){$("#wrapper").scrollTop($("#wrapper")[0].scrollHeight)}},A=void 0==window.chan?$("#chan").html():window.chan,N=!0,j=0,V=!0,D=$("#list-song-html").html(),q=!1,O=!1,H="***REMOVED***",R=!1,Y=/P((([0-9]*\.?[0-9]*)Y)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)W)?(([0-9]*\.?[0-9]*)D)?)?(T(([0-9]*\.?[0-9]*)H)?(([0-9]*\.?[0-9]*)M)?(([0-9]*\.?[0-9]*)S)?)?/,v=[],F=0,U=1,J="",G="",W=!1,I=1,Z=!1,Q=!1,K=6e3,X=Date.now(),ee=!1,te=-1,oe=!0,ne=!1,ae=!0,ie=!1,se=!1,re=!1,le=!1,ce={"sync disconnect on unload":!0,secure:!0,"force new connection":!0};navigator.serviceWorker?navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).then(function(e){console.log(e)})["catch"](function(e){console.error(e)}):console.log("Service Worker is not supported in this browser."),$().ready(function(){window.fromFront||"/"==window.location.pathname||e()}),window.init=e,$(document).keyup(function(e){27==event.keyCode&&($("#results").html(""),d.contains($("#search-wrapper").attr("class").split(" "),"hide")||$("#search-wrapper").toggleClass("hide"),d.contains($("#song-title").attr("class").split(" "),"hide")&&$("#song-title").toggleClass("hide"),"mdi-navigation-close"==$("#search-btn i").attr("class")&&($("#search-btn i").toggleClass("mdi-navigation-close"),$("#search-btn i").toggleClass("mdi-action-search")),$("#results").toggleClass("hide"))}),$("input[class=conf]").change(function(){s.save()}),$("#clickme").click(function(){ge.ytplayer.playVideo();
}),$(document).on("submit","#listImport",function(){fe.importPlaylist(document.getElementById("import").value)}),$(window).focus(function(){$("#favicon").attr("href","static/images/favicon.png"),O=!1}),$(document).on("change","#autoplay",function(){this.checked?$("#embed-area").val('<embed src="https://zoff.no/embed.html#'+A.toLowerCase()+'&autplay" width="600px" height="300px">'):$("#embed-area").val('<embed src="https://zoff.no/embed.html#'+A.toLowerCase()+'" width="600px" height="300px">')}),$(document).on("click","#playbutton_remote",function(e){e.preventDefault(),pe.play_remote()}),$(document).on("click","#pausebutton_remote",function(e){e.preventDefault(),pe.pause_remote()}),$(document).on("click","#skipbutton_remote",function(e){e.preventDefault(),pe.skip_remote()}),$(document).on("submit","#remoteform",function(e){e.preventDefault(),pe.get_input($("#remote_channel").val())}),$(document).on("click","#chat-btn",function(){$("#text-chat-input").focus(),$("#chat-btn i").css("opacity",1),clearInterval(w),q=!1,O=!1,$("#favicon").attr("href","static/images/favicon.png")}),/iPad|iPhone|iPod/.test(navigator.userAgent)?$(document).on("keydown",".search_input",function(e){t(e)}):$(document).on("keyup",".search_input",function(e){t(e)}),$(document).on("click",".chat-tab",function(){$("#text-chat-input").focus()}),$(document).on("click","#skip",function(e){e.preventDefault(),P.skip()}),$(document).on("click","#chan",function(e){e.preventDefault(),P.show()}),$(document).on("submit","#adminForm",function(e){e.preventDefault(),s.pass_save()}),$(document).on("click",".chat-link",function(e){se=!0,O=!1,re=!1,$(".chat-link").attr("style","color: white !important;"),le=!1,$("#favicon").attr("href","static/images/favicon.png"),$("#chatPlaylist").css("display","block"),$("#wrapper").css("display","none"),$("#suggestions").css("display","none"),$("#text-chat-input").focus()}),$(document).on("click",".playlist-link",function(e){se=!1,$("#chatPlaylist").css("display","none"),$("#wrapper").css("display","block"),$("#suggestions").css("display","none")}),$(document).on("click",".suggested-link",function(e){se=!1,$("#chatPlaylist").css("display","none"),$("#wrapper").css("display","none"),$("#suggestions").css("display","block")}),$(document).on("submit","#chatForm",function(e){e.preventDefault(),l.chat(document.getElementById("chatForm").input)}),$(document).on("click","#shuffle",function(e){e.preventDefault(),s.shuffle()}),$(document).on("click","#search-btn",function(e){e.preventDefault(),fe.showSearch()}),$(document).on("click","#song-title",function(e){e.preventDefault(),fe.showSearch()}),$(document).on("click","#admin-lock",function(e){e.preventDefault(),s.log_out()}),$(document).on("click","#closeSettings",function(e){e.preventDefault(),s.hide_settings()}),$(document).on("click",".result-object",function(e){var t=$(e.target),o=t.prop("outerHTML").substring(0,4);if("<i c"!=o){var n=$(this).attr("data-video-id"),a=$(this).attr("data-video-title"),i=$(this).attr("data-video-length");fe.submitAndClose(n,a,i)}}),$(document).on("click","#add-many",function(e){var t=$(this).attr("data-video-id"),o=$(this).attr("data-video-title"),n=$(this).attr("data-video-length");fe.submit(t,o,n)}),$(document).on("click",".vote-container",function(e){var t=$(this).attr("data-video-id");P.vote(t,"pos")}),$(document).on("click","#del",function(e){var t=$(this).attr("data-video-id");P.vote(t,"del")}),$(document).on("click",".add-suggested",function(e){var t=$(this).attr("data-video-id"),o=$(this).attr("data-video-title"),n=$(this).attr("data-video-length");fe.submit(t,o,n),$("#suggested-"+t).remove()}),$(document).on("click","#del_suggested",function(e){var t=$(this).attr("data-video-id");$("#suggested-"+t).remove()}),$(document).on("click","#del_user_suggested",function(e){var t=$(this).attr("data-video-id");$("#suggested-"+t).remove(),P.vote(t,"del")}),$(document).on("click","#toast-container",function(){$(this).fadeOut(function(){$(this).remove()})}),$(document).on("click","#embed-area",function(){this.select()}),$(document).on("click",".brand-logo-navigate",function(e){e.preventDefault(),window.history.pushState("to the frontpage!","Title","/"),n()}),$(document).on("mousemove","#playlist",function(e){var t=e.pageY-this.offsetTop;(27>=t&&""==J||80>=t&&t>=48&&""!=J)&&$("#wrapper").scrollTop()>0?($("#top-button").removeClass("hide"),d.addClass("#bottom-button","hide")):t>=$("#playlist").height()-18&&$("#wrapper").scrollTop()<$("#wrapper")[0].scrollHeight-$("#wrapper").height()-1?($("#bottom-button").removeClass("hide"),d.addClass("#top-button","hide")):(d.addClass("#bottom-button","hide"),d.addClass("#top-button","hide"))}),$(document).on("mouseleave","#playlist",function(){d.addClass("#bottom-button","hide"),d.addClass("#top-button","hide")}),$(document).on("click","#top-button",function(){P.scrollTop()}),$(document).on("click","#bottom-button",function(){P.scrollBottom()});var de,ue,L,pe={id:"",get_input:function(e){""==pe.id?pe.set_id(e):pe.set_channel(e)},set_id:function(e){pe.id=e,$("#pausebutton_remote").attr("disabled",!1),$("#skipbutton_remote").attr("disabled",!1),$("#playbutton_remote").attr("disabled",!1),$("#skipbutton_remote").attr("disabled",!1),$("#remote_channel").val(""),$("#remote_channel").attr("placeholder","Change channel"),$("#remote_header").html("Controlling "+e),$("#volume-control-remote").css("display","block")},set_channel:function(e){L.emit("id",[pe.id,"channel",e])},play_remote:function(){L.emit("id",[pe.id,"play","mock"])},pause_remote:function(){L.emit("id",[pe.id,"pause","mock"])},skip_remote:function(){L.emit("id",[pe.id,"skip","mock"])},initiate_volume:function(){$("#volume-control-remote").slider({min:0,max:100,value:100,range:"min",animate:!0,stop:function(e,t){L.emit("id",[pe.id,"volume",t.value]),console.log("volume")}})}},U=!0;window.mobilecheck=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e};var me={blob_list:[],winter:!1,times_rotated:0,populate_channels:function(e){var t,o="",n=0;1==e[0][5]&&(t=e.shift()),e.sort(me.sortFunction),void 0!==t&&e.unshift(t),pre_card=$(de),window.mobilecheck()||me.add_backdrop(e,0);for(x in e){var a=e[x][3];if(12>n){var i=e[x][1],s=e[x][0],r="background-image:url('https://img.youtube.com/vi/"+i+"/hqdefault.jpg');",l=e[x][4],c=pre_card;1==e[x][5]?(c.find(".pin").attr("style","display:block;"),c.find(".card").attr("title","Pinned!")):(c.find(".pin").attr("style","display:none;"),c.find(".card").attr("title","")),c.find(".chan-name").text(a),c.find(".chan-name").attr("title",a),c.find(".chan-views").text(s),c.find(".chan-songs").text(l),c.find(".chan-bg").attr("style",r),c.find(".chan-link").attr("href",a),$("#channels").append(c.html())}o+="<option value='"+a+"'> ",n++}document.getElementById("preloader").style.display="none",document.getElementById("searches").innerHTML=o,$("#channels").fadeIn(800),$("#searchFrontpage").focus()},sortFunction:function(e,t){var o=e[0],n=t[0],a=e[4],i=t[4];return n>o?1:o>n?-1:i>a?1:a>i?-1:0},getCookie:function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var a=o[n];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""},add_backdrop:function(e,t){(t>=e.length||t>=8)&&(t=0);var o=e[t][1];if(void 0!==me.blob_list[t])setTimeout(function(){U&&($("#mega-background").css("background","url(data:image/png;base64,"+me.blob_list[t]+")"),$("#mega-background").css("background-size","200%"),$("#mega-background").css("opacity",1),$("#searchFrontpage").attr("placeholder",e[t][3]))},500);else{var n=new Image;n.src="/static/images/thumbnails/"+o+".jpg",n.onerror=function(){$.ajax({type:"POST",data:{id:o},url:"/php/imageblob.php",success:function(o){me.blob_list.push(o),setTimeout(function(){$("#mega-background").css("background","url(data:image/png;base64,"+o+")"),$("#mega-background").css("background-size","200%"),$("#mega-background").css("opacity",1),$("#searchFrontpage").attr("placeholder",e[t][3])},500)}})},n.onload=function(){$("#mega-background").css("background","url("+n.src+")"),$("#mega-background").css("background-size","200%"),$("#mega-background").css("opacity",1),$("#searchFrontpage").attr("placeholder",e[t][3])}}setTimeout(function(){50==me.times_rotated&&U?(me.times_rotated=0,t=0,L.emit("frontpage_lists")):U&&(me.times_rotated+=1,me.add_backdrop(e,t+1))},6e3)},start_snowfall:function(){setTimeout(function(){var e=Math.floor(Math.random()*window.innerWidth+1),t=document.createElement("div"),o=document.getElementsByClassName("mega")[0];t.className="snow",t.style.left=e+"px",t.style.top="0px",o.appendChild(t),me.fall_snow(t),me.start_snowfall()},800)},fall_snow:function(e){e.style.top=parseInt(e.style.top.replace("px",""))+2+"px",parseInt(e.style.top.replace("px",""))<document.getElementById("mega-background").offsetHeight-2.5?setTimeout(function(){me.fall_snow(e)},50):e.remove()},set_viewers:function(e){if(e>0){var t=e>1?"listeners":"listener";$("#frontpage-viewer-counter").html(e+" "+t)}},to_channel:function(e,t){$("#channel-load").css("display","block"),window.scrollTo(0,0),U=!1,L.removeAllListeners(),$.ajax({url:e+"/php/index.php",success:function(o){$("body").css("background-color","#2d2d2d"),L.disconnect(),t||(window.history.pushState("to the channel!","Title","/"+e),window.chan=e),$(".mega").remove(),$(".mobile-search").remove(),$("main").attr("class","container center-align main"),$("body").attr("id","channelpage"),$("header").html($($(o)[59]).html()),$("main").html($($(o)[63]).html()),$("#search").attr("placeholder","Find song on YouTube..."),$(".page-footer").addClass("padding-bottom-novideo"),1==$("#alreadychannel").length?window.init():(window.fromFront=!0,window.init()),0==$("#alreadyfp").length&&$("head").append("<div id='alreadyfp'></div>")}})}};String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},$().ready(function(){window.fromChannel||"/"!=window.location.pathname||i()}),window.initfp=i,$(document).on("click","#cookieok",function(){$(this).fadeOut(function(){$(this).remove(),localStorage.ok_cookie=!0})}),$(document).on("click","#toast-container",function(){$(this).fadeOut(function(){$(this).remove()})}),$(document).on("click","#aprilfools",function(){$(".mega").css("-webkit-transform","rotate(0deg)"),$(".mega").css("-moz-transform","rotate(0deg)")}),$(document).on("click",".chan-link",function(e){e.preventDefault(),me.to_channel($(this).attr("href"),!1)}),$(document).on("click",".listen-button",function(e){""==$(".room-namer").val()&&(e.preventDefault(),me.to_channel($(".room-namer").attr("placeholder")))}),$(document).on("submit",".channel-finder",function(e){return e.preventDefault(),me.to_channel($(".room-namer").val()),!1}),$(document).on("submit","#base",function(e){return e.preventDefault(),me.to_channel($("#search-mobile").val()),!1});var ge={loaded:!0,before_load:"",after_load:"",ytplayer:"",stopInterval:!1,setup_youtube_listener:function(e){L.on("np",function(e){if(ge.loaded=!1,0==e.length){document.getElementById("song-title").innerHTML="Empty channel. Add some songs!",$("#player_overlay").height($("#player").height()),window.MSStream||$("#player_overlay").toggleClass("hide");try{ge.ytplayer.stopVideo()}catch(t){}}else{void 0==M?M=e[0][0].id:M!=S&&(M=S),S=e[0][0].id,v=e[1][0],time=e[2],E=time-v.startTime,B=e[0][0].title,duration=e[0][0].duration,m&&window.mobilecheck()&&0==E&&(E=1),y[0].id==S&&P.song_change(y[0].added);try{ye.fetchYoutubeSuggests(S)}catch(t){}if(ge.getTitle(B,I),ge.setBGimage(S),W&&!window.MSStream)try{ge.ytplayer.getVideoUrl().split("v=")[1]!=S&&(ge.ytplayer.loadVideoById(S),ge.notifyUser(S,B),ge.ytplayer.seekTo(E),Z&&ge.ytplayer.pauseVideo()),Z||(m||ge.ytplayer.playVideo(),ie||ge.durationSetter()),(ge.ytplayer.getDuration()>E||0==ge.ytplayer.getDuration())&&ge.ytplayer.seekTo(E),ge.after_load=S,setTimeout(function(){ge.loaded=!0},500)}catch(t){ie||ge.durationSetter()}else ge.getTitle(B,I)}})},onPlayerStateChange:function(e){switch(e.data){case-1:break;case 0:Q=!1,Z=!1,L.emit("end",S);break;case 1:Q=!0,beginning&&window.mobilecheck()&&(ge.ytplayer.pauseVideo(),beginning=!1,m=!1),ne||d.addClass("#player_overlay","hide"),1==document.getElementById("play").className.split(" ").length&&$("#play").toggleClass("hide"),2==document.getElementById("pause").className.split(" ").length&&$("#pause").toggleClass("hide"),Z&&(L.emit("pos"),Z=!1);break;case 2:Z=!0,he.play_pause_show(),m=!0;break;case 3:}},getTitle:function(e,t){var o=t>1?"viewers":"viewer",n=decodeURIComponent(e),a=document.getElementById("song-title"),i=document.getElementById("viewers");document.title=n+" • Zöff / "+A,a.innerHTML=n,i.innerHTML=t+" "+o,a.title=n+" • "+t+" "+o},errorHandler:function(e){5==e.data||100==e.data||101==e.data||150==e.data?(curr_playing=ge.ytplayer.getVideoUrl().replace("https://www.youtube.com/watch?v=",""),L.emit("skip",{error:e.data,id:S,pass:J})):void 0!==S&&ge.ytplayer.loadVideoById(S)},onPlayerReady:function(e){$("#channel-load").css("display","none");try{beginning=!0,W=!0,window.MSStream||($("#player").css("opacity","1"),$("#controls").css("opacity","1"),$(".playlist").css("opacity","1"),ge.ytplayer.loadVideoById(S),ae&&!window.mobilecheck()&&ge.ytplayer.playVideo(),ie||ge.durationSetter(),ne?setTimeout(function(){ge.ytplayer.seekTo(E),ae||(ge.ytplayer.pauseVideo(),he.play_pause_show())},1e3):ge.ytplayer.seekTo(E)),ge.readyLooks(),he.initYoutubeControls(ge.ytplayer),he.initSlider(),ge.ytplayer.setVolume(c.get_volume()),$(".video-container").removeClass("no-opacity")}catch(t){}},readyLooks:function(){ge.setBGimage(S)},setBGimage:function(e){if(void 0!==e&&!ne){var t=new Image;t.onload=function(){var e=new ColorThief,o=e.getColor(t);document.getElementsByTagName("body")[0].style.backgroundColor=d.rgbToHsl(o,!0),$("meta[name=theme-color]").attr("content",d.rgbToHex(o[0],o[1],o[2]))},t.crossOrigin="Anonymous",t.src="https://zoff.no:8080/https://img.youtube.com/vi/"+e+"/mqdefault.jpg"}},set_width:function(e){$(".video-container").width(e)},notifyUser:function(e,t){if(t=t.replace(/\\\'/g,"'").replace(/&quot;/g,"'").replace(/&amp;/g,"&"),"granted"===Notification.permission&&document.hidden){var o=new Notification("Now Playing",{body:t,icon:"http://i.ytimg.com/vi/"+e+"/mqdefault.jpg",iconUrl:"http://i.ytimg.com/vi/"+e+"/mqdefault.jpg"});o.onclick=function(e){window.focus(),this.cancel()},setTimeout(function(){o.close()},5e3)}},setup_all_listeners:function(){L.on("get_list",function(){L.emit("list",A.toLowerCase())}),ge.setup_youtube_listener(A),s.admin_listener(),l.setup_chat_listener(A),l.allchat_listener(),P.channel_listener()},onYouTubeIframeAPIReady:function(){ge.ytplayer=new YT.Player("player",{videoId:S,playerVars:{rel:"0",wmode:"transparent",controls:"0",iv_load_policy:"3",theme:"light",color:"white",showinfo:0},events:{onReady:ge.onPlayerReady,onStateChange:ge.onPlayerStateChange,onError:ge.errorHandler}})},durationSetter:function(){if(void 0!=duration)try{ge.stopInterval||(ie=!0),dMinutes=Math.floor(duration/60),dSeconds=duration-60*dMinutes,currDurr=void 0!=ge.ytplayer.getCurrentTime()?Math.floor(ge.ytplayer.getCurrentTime()):E,currDurr>duration&&(currDurr=duration),minutes=Math.floor(currDurr/60),seconds=currDurr-60*minutes,document.getElementById("duration").innerHTML=d.pad(minutes)+":"+d.pad(seconds)+" <span id='dash'>/</span> "+d.pad(dMinutes)+":"+d.pad(dSeconds),per=100/duration*currDurr,per>=100?per=100:0==duration&&(per=0),$("#bar").width(per+"%")}catch(e){}ge.stopInterval||setTimeout(ge.durationSetter,1e3)},loadPlayer:function(){1==$("script[src='https://www.youtube.com/iframe_api']").length?ge.onYouTubeIframeAPIReady():(k=document.createElement("script"),k.src="https://www.youtube.com/iframe_api",_=document.getElementsByTagName("script")[0],_.parentNode.insertBefore(k,_))}},he={stopInterval:!1,initYoutubeControls:function(){!window.mobilecheck()||/iPad|iPhone|iPod/.test(navigator.userAgent)||window.MSStream||$("#controls").appendTo("#playbar"),he.initControls()},initControls:function(){document.getElementById("volume-button").addEventListener("click",he.mute_video),document.getElementById("playpause").addEventListener("click",he.play_pause),document.getElementById("fullscreen").addEventListener("click",he.fullscreen)},initSlider:function(){try{vol=c.get_volume()}catch(e){}$("#volume").slider({min:0,max:100,value:vol,range:"min",animate:!0,slide:function(e,t){he.setVolume(t.value);try{c.set_volume(t.value)}catch(o){}}}),he.choose_button(vol,!1)},fullscreen:function(){var e=document.getElementById("player"),t=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;t&&t.bind(e)()},play_pause:function(){1==ge.ytplayer.getPlayerState()?(ge.ytplayer.pauseVideo(),!window.mobilecheck()||/iPad|iPhone|iPod/.test(navigator.userAgent)||window.MSStream||(document.getElementById("player").style.display="none",$(".video-container").toggleClass("click-through"),$(".page-footer").toggleClass("padding-bottom-extra"))):(2==ge.ytplayer.getPlayerState()||0==ge.ytplayer.getPlayerState())&&(ge.ytplayer.playVideo(),!window.mobilecheck()||/iPad|iPhone|iPod/.test(navigator.userAgent)||window.MSStream||(document.getElementById("player").style.display="block",$(".video-container").toggleClass("click-through"),$(".page-footer").toggleClass("padding-bottom-extra")))},play_pause_show:function(){1==document.getElementById("pause").className.split(" ").length&&$("#pause").toggleClass("hide"),2==document.getElementById("play").className.split(" ").length&&$("#play").toggleClass("hide")},settings:function(){$("#qS").toggleClass("hide")},changeQuality:function(e){ge.ytplayer.getPlaybackQuality!=e&&(ge.ytplayer.setPlaybackQuality(e),ge.ytplayer.getPlaybackQuality()),$("#qS").toggleClass("hide")},mute_video:function(){ge.ytplayer.isMuted()?(ge.ytplayer.unMute(),he.choose_button(ge.ytplayer.getVolume(),!1)):(he.choose_button(0,!0),ge.ytplayer.mute())},setVolume:function(e){ge.ytplayer.setVolume(e),he.choose_button(e,!1),ge.ytplayer.isMuted()&&ge.ytplayer.unMute()},choose_button:function(e,t){t?(1==document.getElementById("v-full").className.split(" ").length&&$("#v-full").toggleClass("hide"),1==document.getElementById("v-medium").className.split(" ").length&&$("#v-medium").toggleClass("hide"),1==document.getElementById("v-low").className.split(" ").length&&$("#v-low").toggleClass("hide"),2==document.getElementById("v-mute").className.split(" ").length&&$("#v-mute").toggleClass("hide")):e>=0&&33>=e?(1==document.getElementById("v-full").className.split(" ").length&&$("#v-full").toggleClass("hide"),1==document.getElementById("v-medium").className.split(" ").length&&$("#v-medium").toggleClass("hide"),2==document.getElementById("v-low").className.split(" ").length&&$("#v-low").toggleClass("hide"),1==document.getElementById("v-mute").className.split(" ").length&&$("#v-mute").toggleClass("hide")):e>=34&&66>=e?(1==document.getElementById("v-full").className.split(" ").length&&$("#v-full").toggleClass("hide"),2==document.getElementById("v-medium").className.split(" ").length&&$("#v-medium").toggleClass("hide"),1==document.getElementById("v-low").className.split(" ").length&&$("#v-low").toggleClass("hide"),1==document.getElementById("v-mute").className.split(" ").length&&$("#v-mute").toggleClass("hide")):e>=67&&100>=e&&(2==document.getElementById("v-full").className.split(" ").length&&$("#v-full").toggleClass("hide"),1==document.getElementById("v-medium").className.split(" ").length&&$("#v-medium").toggleClass("hide"),1==document.getElementById("v-low").className.split(" ").length&&$("#v-low").toggleClass("hide"),1==document.getElementById("v-mute").className.split(" ").length&&$("#v-mute").toggleClass("hide"))},playPause:function(){state=ge.ytplayer.getPlayerState(),button=document.getElementById("playpause"),1==state?ge.ytplayer.pauseVideo():2==state&&ge.ytplayer.playVideo()},volumeOptions:function(){ge.ytplayer.isMuted()?(ge.ytplayer.unMute(),vol=ge.ytplayer.getVolume(),$("#volume").slider("value",ge.ytplayer.getVolume())):(ge.ytplayer.mute(),$("#volume").slider("value",0))},hoverMute:function(e){vol=ge.ytplayer.getVolume()}},fe={showSearch:function(){$("#search-wrapper").toggleClass("hide"),window.mobilecheck()&&$(".search_input").focus(),$("#song-title").toggleClass("hide"),$("#results").toggleClass("hide"),$("#results").empty(),$("#search-btn i").toggleClass("mdi-navigation-close"),$("#search-btn i").toggleClass("mdi-action-search"),$("#search").focus()},search:function(e){if((void 0==u||void 0==p)&&(u=$("#temp-results-container"),p=$("#empty-results-container").html()),$(".search_results").html(""),""!==window.search_input){R=!0;var t=encodeURIComponent(window.search_input),o="https://www.googleapis.com/youtube/v3/search?key="+H+"&videoEmbeddable=true&part=id&fields=items(id)&type=video&order=viewCount&safeSearch=none&maxResults=25";o+="&q="+t,F&&(o+="&videoCategoryId=10");var n="https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,id&key="+H+"&id=";d.contains($("#search_loader").attr("class").split(" "),"hide")&&$("#search_loader").removeClass("hide"),d.contains($("#results").attr("class").split(" "),"hide")&&$("#results").removeClass("hide"),$.ajax({type:"GET",url:o,dataType:"jsonp",success:function(e){0==e.items.length?($("<div style='display:none;' id='mock-div'>"+p+"</div>").appendTo($("#results")).show("blind",83.33),d.contains($("#search_loader").attr("class").split(" "),"hide")||$("#search_loader").addClass("hide")):e.items&&($.each(e.items,function(e,t){n+=t.id.videoId+","}),$.ajax({type:"GET",url:n,dataType:"jsonp",success:function(e){var t="",o=$(u);$.each(e.items,function(e,n){var a=n.contentDetails.duration;if(secs=fe.durationToSeconds(a),!longsongs||secs<720){C=n.snippet.title,enc_title=C,f=n.id,a=a.replace("PT","").replace("H","h ").replace("M","m ").replace("S","s"),thumb=n.snippet.thumbnails.medium.url;var i=o;i.find(".search-title").text(C),i.find(".result_info").text(a),i.find(".thumb").attr("data-original",thumb),i.find("#add-many").attr("data-video-id",f),i.find("#add-many").attr("data-video-title",enc_title),i.find("#add-many").attr("data-video-length",secs),i.find("#temp-results").attr("data-video-id",f),i.find("#temp-results").attr("data-video-title",enc_title),i.find("#temp-results").attr("data-video-length",secs),t+=i.html()}}),$("<div style='display:none;' id='mock-div'>"+t+"</div>").appendTo($("#results")).show("blind",83.33*(e.items.length-1)),setTimeout(function(){$(".thumb").lazyload({container:$("#results")})},250),d.contains($("#search_loader").attr("class").split(" "),"hide")||$("#search_loader").addClass("hide"),$(".add-many").click(function(e){return e.preventDefault(),e.stopPropagation(),!1})}}))}})}else $(".main").removeClass("blurT"),$("#controls").removeClass("blurT"),$(".main").removeClass("clickthrough")},submitAndClose:function(e,t,o){fe.submit(e,t,o),$("#results").html(""),fe.showSearch(),document.getElementById("search").value="",$("#results").html="",$(".main").removeClass("blurT"),$("#controls").removeClass("blurT"),$(".main").removeClass("clickthrough")},importPlaylist:function(e,t){token="",void 0!==t&&(token="&pageToken="+t),playlist_url="https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails&maxResults=49&key="+H+"&playlistId="+e+token,$.ajax({type:"GET",url:playlist_url,dataType:"jsonp",success:function(t){var o="";fe.addVideos(t.items[0].contentDetails.videoId),$.each(t.items,function(e,t){o+=t.contentDetails.videoId+","}),fe.addVideos(o),t.nextPageToken&&fe.importPlaylist(e,t.nextPageToken),document.getElementById("import").value=""}})},addVideos:function(e){var t="https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,id&key=***REMOVED***&id=";t+=e,$.ajax({type:"POST",url:t,dataType:"jsonp",success:function(e){$.each(e.items,function(e,t){var o=fe.durationToSeconds(t.contentDetails.duration);(!longsongs||720>o)&&(enc_title=t.snippet.title,fe.submit(t.id,enc_title,o))})}})},submit:function(e,t,o){L.emit("add",[e,decodeURIComponent(t),J,o])},durationToSeconds:function(e){var t=e.match(Y);return hours=parseInt(t[12])||0,minutes=parseInt(t[14])||0,seconds=parseInt(t[16])||0,60*hours*60+60*minutes+seconds}},ye={catchUserSuggests:function(e,t){if(t)ye.createSuggested(e);else for(x in e)ye.createSuggested(e[x]);ye.checkUserEmpty()},createSuggested:function(e){var t=e.duration,o=e.id,n=e.title,a=Math.floor(t/60),i=t-60*a;duration=a+"m "+i+"s";var s=P.generateSong({id:o,title:n,length:t,duration:duration},!1,!1,!1,!0);$("#user-suggest-html").append(s)},fetchYoutubeSuggests:function(e){var t="https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId="+e+"&type=video&key="+H,o="https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,id&key="+H+"&id=";$.ajax({type:"GET",url:t,dataType:"jsonp",success:function(e){$.each(e.items.slice(0,5),function(e,t){o+=t.id.videoId+","}),$.ajax({type:"GET",url:o,dataType:"jsonp",success:function(e){$("#suggest-song-html").empty(),$.each(e.items,function(e,t){var o=t.contentDetails.duration,n=fe.durationToSeconds(o),a=t.id,i=t.snippet.title;o=o.replace("PT","").replace("H","h ").replace("M","m ").replace("S","s"),$("#suggest-song-html").append(P.generateSong({id:a,title:i,length:n,duration:o},!1,!1,!1))})}})}})},checkUserEmpty:function(){var e=$("#user-suggest-html").children().length;0==e?d.contains($("#user_suggests").attr("class").split(" "),"hide")||$("#user_suggests").addClass("hide"):$("#user_suggests").removeClass("hide")}}}();